<!doctype html>
<html lang="en">
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Movie Demo</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
         integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
         <link rel="stylesheet" href="./css/default.css">
      <!-- <link rel="stylesheet" href="css/explore.css"> -->
<head>
   </head>

   <body>
      <div id="menu"></div>
      <!-- Search Box -->
      <div class="container">
         <form>
            <div class="dropdown">
               <div class="input-group">
                  <input type="text" id="search-input" class="form-control w-auto" placeholder="Search">
                  <select class="form-select" id="search-filter" aria-label="Filter select">
                    <i class="glyphicon glyphicon-search"></i>
                    <option selected>Track</option>
                    <option value="Artist">Artist</option>
                    <option value="Album">Album</option>
                    <option value="Playlist">Playlist</option>
                  </select>
               </div>
            </div>
         </form>
      </div>

      <div class="container" id="container-items">
         <div class="row g-4 mt-4 p-4">
            <nav aria-label="Page navigation example">
               <ul class="pagination">
                  <li class="page-item"><button class=" btn" id="prev-page-result">Previous</button></li>

                  <li class="page-item"><button class=" btn" id="next-page-result">Next</button></li>
               </ul>
            </nav>
         </div>

         <div id="container-track" class="row g-4 mt-2 p-4">
            <div id="card-track" class="col-3 d-none">
               <div class="card h-100" style="width: 18rem;">
                  <img class="card-img-top" alt="...">
                  <div class="card-body">
                     <h5 class="card-title"></h5>
                     <p class="card-text"></p>

                  </div>
                  <div class="card-footer">
                     <p class="card-text">
                        <small class="text-body-secondary"></small>
                     </p>

                     <!-- Trigger the modal with a button -->
                     <button type="button" class="btn">Info</button>
                     <div class="btn-group dropup">
                       <button type="button" class="btn btn-outline-primary dropdown-toggle" data-bs-toggle="dropdown">
                         Add to Playlist
                       </button>
                        <div class="dropdown-menu dropdown-menu-right" id="playlist-select-">

                        </div>
                     </div>

                     <!-- Modal -->
                     <div class="modal" id="trackModal" tabindex="-1" aria-labelledby="trackModalLabel" aria-hidden='true'>
                        <div class="modal-dialog modal-dialog-centered modal-lg">
                           <!-- Modal content -->
                           <div class="modal-content">
                              <div class="modal-header">
                                 <h5 class="modal-title text-center" id="trackModalLabel"></h5>
                                 <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                              </div>
                              <div class="modal-body" id="trackModalBody">
                                 <img class="img-responsive" alt="">
                              </div>
                              <div class="modal-footer" id="trackModalFooter"></div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>

            </div>
         </div>
      </div>

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N"
      crossorigin="anonymous"></script>
      <script src="scripts/menu.js"></script>
      <script src="scripts/scripts.js"></script>
      <script src="scripts/explore.js"></script>
      <script src="scripts/playlists.js"></script>
      <script>
      /* This variable set the delay of keypress input in search */
      var debounceTime = 650;

      /* Manage search input */
      var timeoutId;
      const searchInputId = document.getElementById('search-input');
      const filterSelectId = document.getElementById('search-filter');

      searchInputId.addEventListener('keypress', function(event) {
         // check if Enter key is pressed
         clearTimeout(timeoutId);
         if (event.key == 'Enter') {
            event.preventDefault();
            getItems(filterSelectId.value, searchInputId.value);
            return;
         }

         timeoutId = setTimeout(() => {
            getItems(filterSelectId.value, searchInputId.value);
         }, debounceTime);
      })


      // Update search if filter change
      filterSelectId.addEventListener('change', function(ev) {
         switch (filterSelectId.value) {
            case 'Track':
               searchInputId.placeholder = "Search Track from name or artist's name";
               break;

            case 'Artist':
               searchInputId.placeholder = "Search Artist from name or songs";
               break;

            case 'Album':
               searchInputId.placeholder = "Search Album from name or artist's name";
               break;

            case 'Playlist':
               searchInputId.placeholder = "Search from Public playlist from songs or tags";
               break;

            default:
               searchInputId.placeholder = "Search";
               break;
         }
         getItems(filterSelectId.value, searchInputId.value);
      })

      // Populate page on first start
      getItems(filterSelectId.value);


      document.getElementById('prev-page-result').addEventListener('click', function() {
         prevResults(filterSelectId.value, searchInputId.value)
      })

      document.getElementById('next-page-result').addEventListener('click', function() {
         nextResults(filterSelectId.value, searchInputId.value)
      })
      </script>
   </body>

</html>

